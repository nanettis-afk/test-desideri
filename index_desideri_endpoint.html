<!DOCTYPE html><html lang="it"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Test dei Desideri</title><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script><style>:root{ --bg:#0f0f1a; --card:#17172b; --text:#f7f7ff; --muted:#c8c8d9; --accent1:#ff6bd6; --accent2:#7bffb7; --accent3:#7ac7ff; --radius:20px; }*{box-sizing:border-box}body{margin:0; font-family:Poppins,system-ui,Segoe UI,Roboto,Arial; color:var(--text); background: radial-gradient(1200px 800px at 10% -10%, #1c1c33 0%, #0b0b14 60%), var(--bg);} .wrap{max-width:900px; margin:28px auto; padding:0 14px;} h1{font-weight:800; margin:0 0 8px;} .subtitle{color:var(--muted); margin:10px 0 16px} .section{background:#17172b; border:1px solid rgba(255,255,255,.12); border-radius:var(--radius); padding:16px; margin-bottom:16px} label{display:block; margin:10px 0 6px; font-weight:600} input,select{width:100%; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.2); background:#1a1a33; color:var(--text)} .row{display:grid; grid-template-columns:1fr; gap:12px} @media(min-width:720px){.row{grid-template-columns:repeat(2,1fr)}} .actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:14px} .btn{background:#1a1a33; border:1px solid rgba(255,255,255,.16); color:var(--text); padding:12px 14px; border-radius:12px; cursor:pointer; font-weight:600} .primary{background: linear-gradient(135deg, var(--accent2), var(--accent3)); color:#082019; border:none} .error{color:#ffd36b; font-size:12px; margin-top:6px} .hidden{display:none} .grid{display:grid; grid-template-columns:repeat(2,1fr); gap:12px} @media(min-width:900px){.grid{grid-template-columns:repeat(3,1fr)}} .card{background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.1); border-radius:var(--radius); padding:14px; display:flex; gap:10px; align-items:center; cursor:pointer;} .card input{display:none} .card.selected{outline: 3px solid rgba(123,255,183,.65);} .emoji{font-size:26px} .title{font-weight:600} .pill{display:inline-block; padding:6px 10px; border-radius:999px; background:#21213b; border:1px solid rgba(255,255,255,.1); font-size:12px; color:var(--muted)} .qcard{background: #121228; border:1px solid rgba(255,255,255,.1); border-radius: var(--radius); padding:14px; margin:10px 0} .qtitle{font-weight:600; margin-bottom:8px} .options{display:flex; gap:8px; flex-wrap:wrap} .btn.opt{background:#1a1a33; border:1px solid rgba(255,255,255,.16); color:var(--text); padding:10px 12px; border-radius:12px; cursor:pointer; font-weight:600} .btn.opt[data-active='true']{background: linear-gradient(135deg, var(--accent1), var(--accent3)); color:#0d0d14;} .panel{background:#0f0f22; border:1px solid rgba(255,255,255,.1); border-radius: var(--radius); padding:14px} .legend{display:flex; flex-wrap:wrap; gap:10px; color:var(--muted)} .tag{background:#1b1b33; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.1)}</style></head><body><div class='wrap'><div class='section'><label for='language' id='label-language'>Lingua</label><select id='language'><option value='it'>Italiano</option><option value='en'>English</option><option value='fr'>Français</option><option value='es'>Español</option><option value='de'>Deutsch</option><option value='zh'>中文</option><option value='ar'>العربية</option></select></div><h1 id='title'>Test dei Desideri</h1><div class='subtitle' id='intro-subtitle'>Compila prima alcune informazioni sociodemografiche, poi accedi al test ✨</div><div id='socioDemo' class='section'><div class='row'><div><label id='label-age' for='age'>Età</label><input type='number' id='age' min='10' max='120' inputmode='numeric' pattern='[0-9]*'></div><div><label id='label-email' for='email'>Email</label><input type='email' id='email' placeholder='nome@esempio.com'></div><div><label id='label-gender' for='gender'>Genere</label><select id='gender'><option value='female' data-i18n='gender.female'>Donna</option><option value='male' data-i18n='gender.male'>Uomo</option><option value='nb' data-i18n='gender.nb'>Non binario</option><option value='na' data-i18n='gender.na'>Preferisco non rispondere</option></select></div><div><label id='label-education' for='education'>Titolo di studio</label><select id='education'><option value='elementary' data-i18n='edu.elementary'>Elementari</option><option value='middle' data-i18n='edu.middle'>Medie</option><option value='high' data-i18n='edu.high'>Diploma</option><option value='degree' data-i18n='edu.degree'>Laurea</option><option value='master' data-i18n='edu.master'>Master/Dottorato</option><option value='other' data-i18n='common.other'>Altro</option></select></div><div><label id='label-job' for='job'>Occupazione</label><select id='job'><option value='student' data-i18n='job.student'>Studente</option><option value='unemployed' data-i18n='job.unemployed'>Disoccupato</option><option value='employee' data-i18n='job.employee'>Lavoratore dipendente</option><option value='self' data-i18n='job.self'>Libero professionista</option><option value='retired' data-i18n='job.retired'>Pensionato</option><option value='other' data-i18n='common.other'>Altro</option></select></div><div><label id='label-status' for='status'>Stato civile</label><select id='status'><option value='single' data-i18n='status.single'>Single</option><option value='couple' data-i18n='status.couple'>In coppia</option><option value='married' data-i18n='status.married'>Sposato/a</option><option value='separated' data-i18n='status.separated'>Separato/a</option><option value='widowed' data-i18n='status.widowed'>Vedovo/a</option></select></div><div><label id='label-children' for='children'>Numero di figli</label><input type='number' id='children' min='0' max='20' inputmode='numeric' pattern='[0-9]*'></div></div><label id='label-country' for='country' style='margin-top:10px;'>Paese di residenza</label><select id='country'><option value='IT'>Italia</option><option value='FR'>Francia</option><option value='DE'>Germania</option><option value='ES'>Spagna</option><option value='GB'>Regno Unito</option><option value='US'>Stati Uniti</option><option value='CN'>Cina</option><option value='JP'>Giappone</option><option value='BR'>Brasile</option><option value='AR'>Argentina</option><option value='MX'>Messico</option><option value='CA'>Canada</option></select><div id='errorMsg' class='error'></div><div class='actions'><button type='button' class='btn primary' id='startTest'>Inizia il test</button></div></div><div id='testSection' class='hidden'><div class='subtitle' id='phase-intro'>Ora puoi iniziare a selezionare i tuoi desideri 🌟</div><div class='section'><div class='pill' id='phase1'>Fase 1 · Seleziona i desideri</div><div class='grid' id='desireGrid'></div><div class='actions'><button type='button' class='btn' id='clearSelection'>Reset</button><button type='button' class='btn primary' id='toQuestions'>Continua →</button></div></div><div id='questions'></div><div class='section' id='results' style='display:none'><div class='panel' style='margin-bottom:12px;'><canvas id='radar' height='420'></canvas></div><div class='panel'><div class='legend' id='legend'></div><div class='actions' style='margin-top:12px;'><button type='button' class='btn' id='toggleMode'>Mostra distanza (↔︎)</button><button type='button' class='btn' id='downloadPNG'>Scarica grafico</button></div></div></div><div class='subtitle' id='footer' style='margin-top:16px;'>Nota: il punteggio è una autovalutazione basata su 6 indicatori...</div></div></div><script>const ENDPOINT='https://script.google.com/macros/s/AKfycbyGgV0lRlamIMP46Fvuw1dD_dMbEh5ollwmYYFoMTTKssTpzWjdoP5SIayktk3dvI4U/exec';const SECRET_KEY='';
let currentLang='it',selected=[],answers={},radar,showDistance=false;
// (i18n object trimmed for brevity in this generated file)
const I={it:{L:{language:"Lingua",title:"Test dei Desideri",intro:"Compila prima alcune informazioni sociodemografiche, poi accedi al test ✨",email:"Email",age:"Età",gender:"Genere",education:"Titolo di studio",job:"Occupazione",status:"Stato civile",children:"Numero di figli",country:"Paese di residenza",start:"Inizia il test",phaseIntro:"Ora puoi iniziare a selezionare i tuoi desideri 🌟",phase1:"Fase 1 · Seleziona i desideri",reset:"Reset",cont:"Continua →",toggle:"Mostra distanza (↔︎)",download:"Scarica grafico",see:"Vedi risultati ✨",footer:"Nota: il punteggio è una autovalutazione basata su 6 indicatori: chiarezza, azioni, risorse, supporto, ostacoli, controllo personale. Usalo come bussola, non come verdetto 😊",warn:"Per favore compila almeno età"},D:["💼 Successo professionale/lavorativo","🚀 Realizzare un grande progetto personale","🌍 Contribuire a un cambiamento sociale","💘 Amore autentico e stabile","👪 Relazioni familiari solide e armoniose","🤝 Amicizie profonde e durature","🧠 Benessere fisico e mentale","🏡 Una casa accogliente/sicura","✈️ Viaggiare e scoprire il mondo","🎭 Espressione creativa/artistica","💶 Stabilità economica/finanziaria","🧭 Libertà e indipendenza personale","✨ Crescita interiore/spiritualità","🏆 Riconoscimento e realizzazione personale","📖 Apprendimento e crescita culturale","🌄 Vivere esperienze nuove e avventurose"],Q:[{k:'clarity',t:'Quanto è CHIARO il desiderio (specifico e misurabile)?',o:['Per nulla','Poco','Abbastanza','Molto','Cristallino'],inv:false},{k:'actions',t:'Stai AGENDO già ora per questo desiderio?',o:['No','Ogni tanto','1-2 azioni/mese','1-2 azioni/settimana','Azioni settimanali+'],inv:false},{k:'resources',t:'Hai RISORSE (tempo, competenze, denaro) sufficienti?',o:['Per nulla','Poche','Parziali','Quasi sufficienti','Sufficienti+'],inv:false},{k:'support',t:'Hai una RETE di supporto (persone/alleati)?',o:['Nessuna','Limitata','Qualche contatto','Buona rete','Rete forte'],inv:false},{k:'obstacles',t:'Gli OSTACOLI ti stanno frenando?',o:['Moltissimo','Molto','Qualche ostacolo','Pochi','Quasi zero'],inv:true},{k:'control',t:'Quanto DIPENDE DA TE (vs. fattori esterni)?',o:['Quasi nulla','Poco','Metà','Molto','Quasi tutto'],inv:false}],R:{prob:"Probabilità di realizzazione",dist:"Distanza dal traguardo"}}};
const KEYS=['lavoro','progetto','impatto','amore','famiglia','amici','benessere','casa','viaggi','arte','soldi','indipendenza','spiritualita','riconoscimento','conoscenza','avventura'];
function t(){return I[currentLang];}
function applyLang(){document.getElementById('label-language').innerText=t().L.language;document.getElementById('title').innerText=t().L.title;document.getElementById('intro-subtitle').innerText=t().L.intro;document.getElementById('label-age').innerText=t().L.age;document.getElementById('label-email').innerText=t().L.email;document.getElementById('startTest').innerText=t().L.start;document.getElementById('phase-intro').innerText=t().L.phaseIntro;document.getElementById('phase1').innerText=t().L.phase1;document.getElementById('clearSelection').innerText=t().L.reset;document.getElementById('toQuestions').innerText=t().L.cont;document.getElementById('toggleMode').innerText=t().L.toggle;document.getElementById('downloadPNG').innerText=t().L.download;document.getElementById('footer').innerText=t().L.footer;buildDesires();if(document.getElementById('questions').children.length)renderQuestions();}
function buildDesires(){const g=document.getElementById('desireGrid');g.innerHTML='';t().D.forEach((label,i)=>addCard(g,KEYS[i],label));selected=[];answers={};document.getElementById('questions').innerHTML='';document.getElementById('results').style.display='none';}
function addCard(parent,key,label){const c=document.createElement('label');c.className='card';c.innerHTML=`<input type="checkbox" data-key="${key}"><div class="emoji">${label.split(' ')[0]}</div><div class="title">${label.substring(2)}</div>`;parent.appendChild(c);const input=c.querySelector('input');input.addEventListener('change',e=>{if(e.target.checked){if(selected.length>=8){e.target.checked=false;return;}selected.push(key);c.classList.add('selected');}else{selected=selected.filter(k=>k!==key);c.classList.remove('selected');}});}
function renderQuestions(){const holder=document.getElementById('questions');holder.innerHTML='';const Q=t().Q;selected.forEach((key,i)=>{const el=document.querySelector(`input[data-key="${key}"]`).parentElement;const label=el.querySelector('.emoji').textContent+' '+el.querySelector('.title').textContent;const block=document.createElement('div');block.className='qcard';block.innerHTML=`<div class="qtitle">${i+1}. ${label}</div>`;Q.forEach(q=>{const row=document.createElement('div');row.style.margin='10px 0 14px';row.innerHTML=`<div style="margin-bottom:6px; color:var(--muted)">${q.t}</div>`;const opts=document.createElement('div');opts.className='options';q.o.forEach((lab,idx)=>{const b=document.createElement('button');b.className='btn opt';b.textContent=lab;b.setAttribute('data-active','false');b.onclick=()=>{[...opts.children].forEach(el=>el.setAttribute('data-active','false'));b.setAttribute('data-active','true');if(!answers[key])answers[key]={};answers[key][q.k]=idx;};opts.appendChild(b);});row.appendChild(opts);block.appendChild(row);});holder.appendChild(block);});const go=document.createElement('div');go.className='actions';go.innerHTML=`<button type="button" class="btn primary" id="seeResults">Vedi risultati ✨</button>`;holder.appendChild(go);document.getElementById('seeResults').onclick=computeAndShow;}
function computeScoreFor(desireKey){const a=answers[desireKey]||{};const Q=t().Q;let sum=0,max=0;Q.forEach(q=>{const v=(a[q.k]??0);const val=q.inv?(4-v):v;sum+=(val/4);max+=1;});const ratio=(max?sum/max:0);return Math.round(ratio*100);}
function buildRecords(){const when=new Date().toISOString();const recs=[];const socio={email:(document.getElementById('email')?.value||'').trim(),age:(document.getElementById('age')?.value||'').trim(),gender:document.getElementById('gender')?.value||'',education:document.getElementById('education')?.value||'',job:document.getElementById('job')?.value||'',status:document.getElementById('status')?.value||'',children:(document.getElementById('children')?.value||'').trim(),country:document.getElementById('country')?.value||''};selected.forEach(k=>{const el=document.querySelector(`input[data-key="${k}"]`).parentElement;const label=el.querySelector('.emoji').textContent+' '+el.querySelector('.title').textContent;const score=computeScoreFor(k);const a=answers[k]||{};recs.push({timestamp:when,language:currentLang,email:socio.email,age:socio.age,gender:socio.gender,education:socio.education,job:socio.job,status:socio.status,children:socio.children,country:socio.country,dream:label,score,clarity:a['clarity']??0,actions:a['actions']??0,resources:a['resources']??0,support:a['support']??0,obstacles:a['obstacles']??0,control:a['control']??0});});return recs;}
async function sendToSheet(records){try{const survey_id=(crypto.randomUUID&&crypto.randomUUID())||String(Date.now());const enriched=records.map(r=>({...r,survey_id}));const url=SECRET_KEY?`${endpoint}?key=${{encodeURIComponent(SECRET_KEY)}}`:ENDPOINT;await fetch(url,{method:'POST',headers:{'Content-Type':'text/plain;charset=utf-8'},body:JSON.stringify(enriched)});}catch(e){console.log('Invio a Sheet non riuscito:',e);}}
function computeAndShow(){const Q=t().Q;for(const k of selected){if(!answers[k]||Object.keys(answers[k]).length<Q.length){alert(t().L.warn);return;}}const labels=selected.map(k=>{const el=document.querySelector(`input[data-key="${k}"]`).parentElement;return el.querySelector('.emoji').textContent+' '+el.querySelector('.title').textContent;});const scores=selected.map(k=>computeScoreFor(k));const dataToPlot=showDistance?scores.map(s=>100-s):scores;const legend=document.getElementById('legend');legend.innerHTML='';selected.forEach((k,i)=>{const chip=document.createElement('div');chip.className='tag';chip.textContent=`${labels[i]} → ${showDistance?(100-scores[i]):scores[i]}%`;legend.appendChild(chip);});document.getElementById('results').style.display='';const ctx=document.getElementById('radar');if(radar)radar.destroy();radar=new Chart(ctx,{type:'radar',data:{labels,datasets:[{label:showDistance?'Distanza dal traguardo':'Probabilità di realizzazione',data:dataToPlot,fill:true,backgroundColor:'rgba(123,255,183,0.25)',borderColor:'rgba(122,199,255,1)',pointBackgroundColor:'#ffffff',pointBorderColor:'rgba(255,255,255,.6)',pointRadius:4,borderWidth:3}]},options:{responsive:true,scales:{r:{suggestedMin:0,suggestedMax:100,grid:{color:'rgba(255,255,255,.1)'},angleLines:{color:'rgba(255,255,255,.15)'},pointLabels:{color:'#eaeaf6',font:{size:12,weight:'600'}},ticks:{display:true,color:'#bfbfdf',backdropColor:'transparent',stepSize:20}}},plugins:{legend:{labels:{color:'#eaeaf6'}}}}});const recs=buildRecords();sendToSheet(recs);}
document.getElementById('language').addEventListener('change',e=>{currentLang=e.target.value;applyLang();});
document.getElementById('startTest').addEventListener('click',()=>{const age=document.getElementById('age').value.trim();if(!age){document.getElementById('errorMsg').textContent=t().L.warn;}else{document.getElementById('errorMsg').textContent='';}document.getElementById('socioDemo').classList.add('hidden');document.getElementById('testSection').classList.remove('hidden');window.scrollTo({top:0,behavior:'smooth'});applyLang();});
document.getElementById('clearSelection').addEventListener('click',()=>{selected=[];answers={};document.querySelectorAll('#desireGrid input').forEach(i=>{i.checked=false;i.closest('.card').classList.remove('selected');});document.getElementById('questions').innerHTML='';document.getElementById('results').style.display='none';});
document.getElementById('toQuestions').addEventListener('click',()=>{if(!selected.length){alert(t().L.warn);return;}renderQuestions();window.scrollTo({top:document.getElementById('questions').offsetTop-10,behavior:'smooth'});});
document.getElementById('toggleMode').addEventListener('click',()=>{showDistance=!showDistance;computeAndShow();});
document.getElementById('downloadPNG').addEventListener('click',()=>{const link=document.createElement('a');link.download='radar_desideri.png';link.href=document.getElementById('radar').toDataURL('image/png');link.click();});
applyLang();buildDesires();</script></body></html>